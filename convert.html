
<span class="o">[</span> <span class="s2">&quot;/var/log/nginx&quot;</span><span class="p">,</span> <span class="s2">&quot;/etc/nginx&quot;</span><span class="p">,</span>
  <span class="s2">&quot;/etc/nginx/conf.d&quot;</span><span class="p">,</span> <span class="s2">&quot;/etc/nginx/sites-enabled&quot;</span>
<span class="o">].</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">dir</span><span class="o">|</span>
  <span class="n">directory</span> <span class="n">dir</span> <span class="k">do</span>
    <span class="n">owner</span>       <span class="s2">&quot;root&quot;</span>
    <span class="n">group</span>       <span class="s2">&quot;root&quot;</span>
    <span class="n">mode</span>        <span class="s2">&quot;0755&quot;</span>
    <span class="n">recursive</span>   <span class="kp">true</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">template</span> <span class="s2">&quot;/etc/nginx/nginx.conf&quot;</span> <span class="k">do</span>
  <span class="n">source</span>    <span class="s2">&quot;nginx.conf.erb&quot;</span>
  <span class="n">owner</span>     <span class="s2">&quot;root&quot;</span>
  <span class="n">group</span>     <span class="s2">&quot;root&quot;</span>
  <span class="n">mode</span>      <span class="s2">&quot;0755&quot;</span>
  <span class="n">notifies</span>  <span class="ss">:restart</span><span class="p">,</span> <span class="s2">&quot;service[nginx]&quot;</span>
<span class="k">end</span>

<span class="n">template</span> <span class="s2">&quot;/etc/nginx/sites-enabled/_default.conf&quot;</span> <span class="k">do</span>
  <span class="n">source</span>    <span class="s2">&quot;default-site.conf.erb&quot;</span>
  <span class="n">owner</span>     <span class="s2">&quot;root&quot;</span>
  <span class="n">group</span>     <span class="s2">&quot;root&quot;</span>
  <span class="n">mode</span>      <span class="s2">&quot;0755&quot;</span>
  <span class="n">notifies</span>  <span class="ss">:restart</span><span class="p">,</span> <span class="s2">&quot;service[nginx]&quot;</span>
<span class="k">end</span>

<span class="n">template</span> <span class="s2">&quot;/etc/init.d/nginx&quot;</span> <span class="k">do</span>
  <span class="n">source</span>    <span class="s2">&quot;nginx.init&quot;</span>
  <span class="n">owner</span>     <span class="s2">&quot;root&quot;</span>
  <span class="n">group</span>     <span class="s2">&quot;root&quot;</span>
  <span class="n">mode</span>      <span class="s2">&quot;0755&quot;</span>
  <span class="n">notifies</span>  <span class="ss">:restart</span><span class="p">,</span> <span class="s2">&quot;service[nginx]&quot;</span>
<span class="k">end</span>

<span class="n">service</span> <span class="s2">&quot;nginx&quot;</span> <span class="k">do</span>
  <span class="n">supports</span>  <span class="ss">:restart</span> <span class="o">=&gt;</span> <span class="kp">true</span><span class="p">,</span> <span class="ss">:reload</span> <span class="o">=&gt;</span> <span class="kp">true</span><span class="p">,</span> <span class="ss">:status</span> <span class="o">=&gt;</span> <span class="kp">true</span>
  <span class="n">action</span>    <span class="o">[</span> <span class="ss">:enable</span><span class="p">,</span> <span class="ss">:start</span> <span class="o">]</span>
<span class="k">end</span>
</pre></div>
